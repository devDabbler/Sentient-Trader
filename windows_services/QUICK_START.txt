=================================================================
SENTIENT TRADER - TASK SCHEDULER FIX - QUICK START
=================================================================

PROBLEM FIXED: Services were hanging on import during Task Scheduler startup
SOLUTION: Implemented lazy imports in services/llm_helper.py

=================================================================
STEP-BY-STEP COMMANDS (PowerShell Admin)
=================================================================

1. Navigate and activate:
   cd "C:\Users\seaso\Sentient Trader"
   .\venv\Scripts\Activate.ps1

2. Test the fix:
   python windows_services\test_lazy_imports.py
   
   Expected: All imports complete successfully in < 1s each

3. Setup services:
   .\windows_services\setup_task_scheduler_v2.ps1
   
   This creates and starts all 3 services automatically

4. Verify they're running:
   Get-ScheduledTask -TaskName 'Sentient*' | Select TaskName, State
   
   Expected: All show "Running"

5. Check logs:
   Get-Content logs\stock_monitor_service.log -Tail 20
   
   Expected: See "SERVICE READY - STARTING MONITOR"

=================================================================
MANAGEMENT COMMANDS
=================================================================

View status:
  Get-ScheduledTask -TaskName 'Sentient*' | Select TaskName, State

Watch logs:
  Get-Content logs\stock_monitor_service.log -Tail 20 -Wait

Stop all:
  Get-ScheduledTask -TaskName "Sentient*" | Stop-ScheduledTask

Start all:
  Get-ScheduledTask -TaskName "Sentient*" | Start-ScheduledTask

=================================================================
FILES CHANGED
=================================================================

âœ… FIXED: services/llm_helper.py (lazy imports)
âœ… NEW: windows_services/runners/run_stock_monitor_v5.py
âœ… NEW: windows_services/setup_task_scheduler_v2.ps1
âœ… NEW: windows_services/test_lazy_imports.py
ðŸ“š DOC: docs/TASK_SCHEDULER_FIX.md (full explanation)
ðŸ“š DOC: windows_services/COMMANDS_TO_RUN.md (detailed commands)

=================================================================
SERVICES CONFIGURED
=================================================================

1. SentientStockMonitor
   - Runner: run_stock_monitor_v5.py
   - Log: logs/stock_monitor_service.log
   - Function: Monitors stock opportunities (alerts only)

2. SentientCryptoBreakout  
   - Runner: run_crypto_breakout_v2.py
   - Log: logs/crypto_breakout_service.log
   - Function: Monitors crypto breakout opportunities

3. SentientDEXLaunch
   - Runner: run_dex_launch_v2.py
   - Log: logs/dex_launch_service.log
   - Function: Monitors new DEX token launches

=================================================================
WHAT WAS FIXED
=================================================================

BEFORE: services/llm_helper.py imported llm_request_manager at module level
        This triggered network library initialization during import
        Task Scheduler environment couldn't handle this - HUNG

AFTER:  Moved imports inside functions (lazy loading)
        Libraries only load when actually needed
        Imports complete instantly - NO HANG

=================================================================
VERIFICATION CHECKLIST
=================================================================

â–¡ Test script passes (test_lazy_imports.py)
â–¡ Debug script completes (run_stock_monitor_debug.py)  
â–¡ All tasks created successfully
â–¡ All tasks show "Running" state
â–¡ Logs show "SERVICE READY" message
â–¡ No error messages in logs
â–¡ Services survive system reboot

=================================================================
TROUBLESHOOTING
=================================================================

If service won't start:
  python windows_services\runners\run_stock_monitor_v5.py
  (run manually to see error)

If imports hang:
  python windows_services\runners\run_stock_monitor_debug.py
  (identifies which import is hanging)

If need more details:
  See docs/TASK_SCHEDULER_FIX.md
  See windows_services/COMMANDS_TO_RUN.md

=================================================================
